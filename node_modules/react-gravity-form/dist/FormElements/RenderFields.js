"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireWildcard(require("react")),_RenderField=_interopRequireDefault(require("./RenderField")),divideFieldsIntoPages=function(a,b){for(var c,d=b.map(function(){return[]}),e=0;e<a.length;e++)c=d[a[e].pageNumber],d[a[e].pageNumber-1]&&("page"===a[e].type?d[a[e].pageNumber-2].push(a[e]):d[a[e].pageNumber-1].push(a[e]));return d},getMaxFieldId=function(a){for(var b=0,c=0;c<a.length;c++)parseInt(a[c].id)>b&&(b=parseInt(a[c].id));return b+1},fieldTypes=["checkbox","email","hidden","html","number","phone","radio","select","multiselect","text","textarea","website","page","date","fileupload","consent","password","section","scustom","name","address","buckarooideal","postcode","captcha"],honeyPotLables=["Name","Email","Phone","Comments"],honeypotLabel=honeyPotLables[Math.floor(Math.random()*Math.floor(4))],_default=function(a){function b(a,b){return _react["default"].createElement(_RenderField["default"],(0,_extends2["default"])({key:"".concat(a.formId,"-").concat(a.id),field:a,formValues:d,submitFailed:f,setTouched:i,setErrorMessages:j,submitSuccess:g,updateForm:e,touched:h,pages:k&&k.pages.length,prevStep:m,nextStep:n,isNextDisabled:o,checkConditionalLogic:p,saveStateToHtmlField:q,styledComponents:s,customComponents:t,error:!!(v&&v[a.id])&&v[a.id],unsetError:u,dropzoneText:w,language:y,apiKeys:z,fields:b,errors:v},A))}var c=a.fields,d=a.formValues,e=a.updateForm,f=a.submitFailed,g=a.submitSuccess,h=a.touched,i=a.setTouched,j=a.setErrorMessages,k=a.pagination,l=a.activePage,m=a.prevStep,n=a.nextStep,o=a.isNextDisabled,p=a.checkConditionalLogic,q=a.saveStateToHtmlField,r=a.enableHoneypot,s=a.styledComponents,t=a.customComponents,u=a.unsetError,v=a.errors,w=a.dropzoneText,x=a.pageClicked,y=a.language,z=a.apiKeys,A=(0,_objectWithoutProperties2["default"])(a,["fields","formValues","updateForm","submitFailed","submitSuccess","touched","setTouched","setErrorMessages","pagination","activePage","prevStep","nextStep","isNextDisabled","checkConditionalLogic","saveStateToHtmlField","enableHoneypot","styledComponents","customComponents","unsetError","errors","dropzoneText","pageClicked","language","apiKeys"]),B=k?divideFieldsIntoPages(c,k.pages):void 0,C=getMaxFieldId(c),D=(0,_react.useState)(""),E=(0,_slicedToArray2["default"])(D,2),F=E[0],G=E[1],H=(0,_react.useRef)();(0,_react.useEffect)(function(){H.current=l});var I=H.current;return _react["default"].createElement("div",{className:"form-fields".concat(k&&1<k.pages.length?" hasPages ".concat(x?"":" noPageClicked"):"")},k&&1<k.pages.length?k.pages.map(function(a,d){return _react["default"].createElement("div",{className:"page".concat(l===d+1?" active":"").concat(I&&d===I&&l!==d+1&&I!==l?" prevStep":""),key:"page-".concat(d)},a&&_react["default"].createElement("div",{className:"gf_step"},_react["default"].createElement("span",null,a)),B[d].map(function(a){return fieldTypes.includes(a.type)&&b(a,c)}))}):c.map(function(a){return fieldTypes.includes(a.type)&&b(a,c)}),r&&_react["default"].createElement("div",{className:"form-field gform_validation_container"},_react["default"].createElement("label",{htmlFor:"input_".concat(C),className:"gf-label "},honeypotLabel),_react["default"].createElement("input",{type:"text",name:"input_".concat(C),id:"input_".concat(C),value:F,onChange:function onChange(a){return G(a.target.value)},autoComplete:"off"})))};exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Gb3JtRWxlbWVudHMvUmVuZGVyRmllbGRzLmpzeCJdLCJuYW1lcyI6WyJkaXZpZGVGaWVsZHNJbnRvUGFnZXMiLCJmaWVsZHMiLCJwYWdlcyIsImFyciIsInRtcEZpZWxkcyIsIm1hcCIsImkiLCJsZW5ndGgiLCJwYWdlTnVtYmVyIiwidHlwZSIsInB1c2giLCJnZXRNYXhGaWVsZElkIiwibWF4IiwicGFyc2VJbnQiLCJpZCIsImZpZWxkVHlwZXMiLCJob25leVBvdExhYmxlcyIsImhvbmV5cG90TGFiZWwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwcm9wcyIsInJlbmRlckZpbGVkIiwiZmllbGQiLCJmb3JtSWQiLCJmb3JtVmFsdWVzIiwic3VibWl0RmFpbGVkIiwic2V0VG91Y2hlZCIsInNldEVycm9yTWVzc2FnZXMiLCJzdWJtaXRTdWNjZXNzIiwidXBkYXRlRm9ybSIsInRvdWNoZWQiLCJwYWdpbmF0aW9uIiwicHJldlN0ZXAiLCJuZXh0U3RlcCIsImlzTmV4dERpc2FibGVkIiwiY2hlY2tDb25kaXRpb25hbExvZ2ljIiwic2F2ZVN0YXRlVG9IdG1sRmllbGQiLCJzdHlsZWRDb21wb25lbnRzIiwiY3VzdG9tQ29tcG9uZW50cyIsImVycm9ycyIsInVuc2V0RXJyb3IiLCJkcm9wem9uZVRleHQiLCJsYW5ndWFnZSIsImFwaUtleXMiLCJyZXN0IiwiYWN0aXZlUGFnZSIsImVuYWJsZUhvbmV5cG90IiwicGFnZUNsaWNrZWQiLCJkaXZpZGVkRmllbGRzIiwibWF4SUQiLCJob25leXBvdFZhbHVlIiwic2V0SG9uZXlwb3RWYWx1ZSIsInByZXZTdGVwdFJlZiIsImN1cnJlbnQiLCJwcmV2Q291bnQiLCJwYWdlIiwiaW5kZXgiLCJpbmNsdWRlcyIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6InFvQkFHTUEscUJBQXFCLENBQUcsU0FBQ0MsQ0FBRCxDQUFTQyxDQUFULENBQW1CLENBRy9DLE9BQ1FDLENBQUFBLENBRFIs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YyxFQUNiLHVDQUFLLFNBQVMsQ0FBQyx1Q0FBZixFQUNFLHlDQUFPLE9BQU8saUJBQVdHLENBQVgsQ0FBZCxDQUFrQyxTQUFTLENBQUMsV0FBNUMsRUFDR2pDLGFBREgsQ0FERixDQUlFLHlDQUNFLElBQUksQ0FBQyxNQURQLENBRUUsSUFBSSxpQkFBV2lDLENBQVgsQ0FGTixDQUdFLEVBQUUsaUJBQVdBLENBQVgsQ0FISixDQUlFLEtBQUssQ0FBRUMsQ0FKVCxDQUtFLFFBQVEsQ0FBRSxrQkFBQVEsQ0FBQyxRQUFJUCxDQUFBQSxDQUFnQixDQUFDTyxDQUFDLENBQUNDLE1BQUYsQ0FBU0MsS0FBVixDQUFwQixDQUxiLENBTUUsWUFBWSxDQUFDLEtBTmYsRUFKRixDQXBDSixDQW9ESCxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlbmRlckZpZWxkIGZyb20gXCIuL1JlbmRlckZpZWxkXCI7XG5cbmNvbnN0IGRpdmlkZUZpZWxkc0ludG9QYWdlcyA9IChmaWVsZHMsIHBhZ2VzKSA9PiB7XG4gIGNvbnN0IHRtcEZpZWxkcyA9IHBhZ2VzLm1hcChpdGVtID0+IFtdKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGFyciA9IHRtcEZpZWxkc1tmaWVsZHNbaV0ucGFnZU51bWJlcl07XG4gICAgaWYgKHRtcEZpZWxkc1tmaWVsZHNbaV0ucGFnZU51bWJlciAtIDFdKSB7XG4gICAgICAvLyBtb3ZlIHBhZ2UgZmllbGQgdG8gdGhlIGZpcnN0IGdyb3VwXG4gICAgICBpZiAoZmllbGRzW2ldLnR5cGUgPT09IFwicGFnZVwiKSB7XG4gICAgICAgIHRtcEZpZWxkc1tmaWVsZHNbaV0ucGFnZU51bWJlciAtIDJdLnB1c2goZmllbGRzW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRtcEZpZWxkc1tmaWVsZHNbaV0ucGFnZU51bWJlciAtIDFdLnB1c2goZmllbGRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRtcEZpZWxkcztcbn07XG5cbmNvbnN0IGdldE1heEZpZWxkSWQgPSBmaWVsZHMgPT4ge1xuICBsZXQgbWF4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocGFyc2VJbnQoZmllbGRzW2ldLmlkKSA+IG1heCkge1xuICAgICAgbWF4ID0gcGFyc2VJbnQoZmllbGRzW2ldLmlkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1heCArIDE7XG59O1xuXG5jb25zdCBmaWVsZFR5cGVzID0gW1xuICBcImNoZWNrYm94XCIsXG4gIFwiZW1haWxcIixcbiAgXCJoaWRkZW5cIixcbiAgXCJodG1sXCIsXG4gIFwibnVtYmVyXCIsXG4gIFwicGhvbmVcIixcbiAgXCJyYWRpb1wiLFxuICBcInNlbGVjdFwiLFxuICBcIm11bHRpc2VsZWN0XCIsXG4gIFwidGV4dFwiLFxuICBcInRleHRhcmVhXCIsXG4gIFwid2Vic2l0ZVwiLFxuICBcInBhZ2VcIixcbiAgXCJkYXRlXCIsXG4gIFwiZmlsZXVwbG9hZFwiLFxuICBcImNvbnNlbnRcIixcbiAgXCJwYXNzd29yZFwiLFxuICBcInNlY3Rpb25cIixcbiAgXCJzY3VzdG9tXCIsXG4gIFwibmFtZVwiLFxuICBcImFkZHJlc3NcIixcbiAgXCJidWNrYXJvb2lkZWFsXCIsXG4gIFwicG9zdGNvZGVcIixcbiAgXCJjYXB0Y2hhXCIsXG5dO1xuXG5jb25zdCBob25leVBvdExhYmxlcyA9IFtcIk5hbWVcIiwgXCJFbWFpbFwiLCBcIlBob25lXCIsIFwiQ29tbWVudHNcIl07XG5jb25zdCBob25leXBvdExhYmVsID0gaG9uZXlQb3RMYWJsZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcig0KSldO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9wcyA9PiB7XG4gIGNvbnN0IHtcbiAgICBmaWVsZHMsXG4gICAgZm9ybVZhbHVlcyxcbiAgICB1cGRhdGVGb3JtLFxuICAgIHN1Ym1pdEZhaWxlZCxcbiAgICBzdWJtaXRTdWNjZXNzLFxuICAgIHRvdWNoZWQsXG4gICAgc2V0VG91Y2hlZCxcbiAgICBzZXRFcnJvck1lc3NhZ2VzLFxuICAgIHBhZ2luYXRpb24sXG4gICAgYWN0aXZlUGFnZSxcbiAgICBwcmV2U3RlcCxcbiAgICBuZXh0U3RlcCxcbiAgICBpc05leHREaXNhYmxlZCxcbiAgICBjaGVja0NvbmRpdGlvbmFsTG9naWMsXG4gICAgc2F2ZVN0YXRlVG9IdG1sRmllbGQsXG4gICAgZW5hYmxlSG9uZXlwb3QsXG4gICAgc3R5bGVkQ29tcG9uZW50cyxcbiAgICBjdXN0b21Db21wb25lbnRzLFxuICAgIHVuc2V0RXJyb3IsXG4gICAgZXJyb3JzLFxuICAgIGRyb3B6b25lVGV4dCxcbiAgICBwYWdlQ2xpY2tlZCxcbiAgICBsYW5ndWFnZSxcbiAgICBhcGlLZXlzLFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuXG4gIC8vIGdldCBwYWdlIGluZGV4ZXNcbiAgY29uc3QgZGl2aWRlZEZpZWxkcyA9IHBhZ2luYXRpb25cbiAgICA/IGRpdmlkZUZpZWxkc0ludG9QYWdlcyhmaWVsZHMsIHBhZ2luYXRpb24ucGFnZXMpXG4gICAgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IG1heElEID0gZ2V0TWF4RmllbGRJZChmaWVsZHMpO1xuICBjb25zdCBbaG9uZXlwb3RWYWx1ZSwgc2V0SG9uZXlwb3RWYWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcblxuICBjb25zdCBwcmV2U3RlcHRSZWYgPSB1c2VSZWYoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBwcmV2U3RlcHRSZWYuY3VycmVudCA9IGFjdGl2ZVBhZ2U7XG4gIH0pO1xuICBjb25zdCBwcmV2Q291bnQgPSBwcmV2U3RlcHRSZWYuY3VycmVudDtcblxuICBmdW5jdGlvbiByZW5kZXJGaWxlZChmaWVsZCwgZmllbGRzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxSZW5kZXJGaWVsZFxuICAgICAgICBrZXk9e2Ake2ZpZWxkLmZvcm1JZH0tJHtmaWVsZC5pZH1gfVxuICAgICAgICBmaWVsZD17ZmllbGR9XG4gICAgICAgIGZvcm1WYWx1ZXM9e2Zvcm1WYWx1ZXN9XG4gICAgICAgIHN1Ym1pdEZhaWxlZD17c3VibWl0RmFpbGVkfVxuICAgICAgICBzZXRUb3VjaGVkPXtzZXRUb3VjaGVkfVxuICAgICAgICBzZXRFcnJvck1lc3NhZ2VzPXtzZXRFcnJvck1lc3NhZ2VzfVxuICAgICAgICBzdWJtaXRTdWNjZXNzPXtzdWJtaXRTdWNjZXNzfVxuICAgICAgICB1cGRhdGVGb3JtPXt1cGRhdGVGb3JtfVxuICAgICAgICB0b3VjaGVkPXt0b3VjaGVkfVxuICAgICAgICBwYWdlcz17cGFnaW5hdGlvbiAmJiBwYWdpbmF0aW9uLnBhZ2VzLmxlbmd0aH1cbiAgICAgICAgcHJldlN0ZXA9e3ByZXZTdGVwfVxuICAgICAgICBuZXh0U3RlcD17bmV4dFN0ZXB9XG4gICAgICAgIGlzTmV4dERpc2FibGVkPXtpc05leHREaXNhYmxlZH1cbiAgICAgICAgY2hlY2tDb25kaXRpb25hbExvZ2ljPXtjaGVja0NvbmRpdGlvbmFsTG9naWN9XG4gICAgICAgIHNhdmVTdGF0ZVRvSHRtbEZpZWxkPXtzYXZlU3RhdGVUb0h0bWxGaWVsZH1cbiAgICAgICAgc3R5bGVkQ29tcG9uZW50cz17c3R5bGVkQ29tcG9uZW50c31cbiAgICAgICAgY3VzdG9tQ29tcG9uZW50cz17Y3VzdG9tQ29tcG9uZW50c31cbiAgICAgICAgZXJyb3I9e2Vycm9ycyAmJiBlcnJvcnNbZmllbGQuaWRdID8gZXJyb3JzW2ZpZWxkLmlkXSA6IGZhbHNlfVxuICAgICAgICB1bnNldEVycm9yPXt1bnNldEVycm9yfVxuICAgICAgICBkcm9wem9uZVRleHQ9e2Ryb3B6b25lVGV4dH1cbiAgICAgICAgbGFuZ3VhZ2U9e2xhbmd1YWdlfVxuICAgICAgICBhcGlLZXlzPXthcGlLZXlzfVxuICAgICAgICBmaWVsZHM9e2ZpZWxkc31cbiAgICAgICAgZXJyb3JzPXtlcnJvcnN9XG4gICAgICAgIHsuLi5yZXN0fVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2Bmb3JtLWZpZWxkcyR7XG4gICAgICAgIHBhZ2luYXRpb24gJiYgcGFnaW5hdGlvbi5wYWdlcy5sZW5ndGggPiAxXG4gICAgICAgICAgPyBgIGhhc1BhZ2VzICR7IXBhZ2VDbGlja2VkID8gXCIgbm9QYWdlQ2xpY2tlZFwiIDogXCJcIn1gXG4gICAgICAgICAgOiBcIlwiXG4gICAgICB9YH1cbiAgICA+XG4gICAgICB7cGFnaW5hdGlvbiAmJiBwYWdpbmF0aW9uLnBhZ2VzLmxlbmd0aCA+IDFcbiAgICAgICAgPyBwYWdpbmF0aW9uLnBhZ2VzLm1hcCgocGFnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcGFnZSR7YWN0aXZlUGFnZSA9PT0gaW5kZXggKyAxID8gXCIgYWN0aXZlXCIgOiBcIlwifSR7XG4gICAgICAgICAgICAgICAgcHJldkNvdW50ICYmXG4gICAgICAgICAgICAgICAgaW5kZXggPT09IHByZXZDb3VudCAmJlxuICAgICAgICAgICAgICAgIGFjdGl2ZVBhZ2UgIT09IGluZGV4ICsgMSAmJlxuICAgICAgICAgICAgICAgIHByZXZDb3VudCAhPT0gYWN0aXZlUGFnZVxuICAgICAgICAgICAgICAgICAgPyBcIiBwcmV2U3RlcFwiXG4gICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgIGtleT17YHBhZ2UtJHtpbmRleH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7cGFnZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZl9zdGVwXCI+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj57cGFnZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkaXZpZGVkRmllbGRzW2luZGV4XS5tYXAoXG4gICAgICAgICAgICAgICAgZmllbGQgPT5cbiAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZXMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgcmVuZGVyRmlsZWQoZmllbGQsIGZpZWxkcylcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpXG4gICAgICAgIDogZmllbGRzLm1hcChcbiAgICAgICAgICAgIGZpZWxkID0+XG4gICAgICAgICAgICAgIGZpZWxkVHlwZXMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgcmVuZGVyRmlsZWQoZmllbGQsIGZpZWxkcylcbiAgICAgICAgICApfVxuICAgICAge2VuYWJsZUhvbmV5cG90ICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGdmb3JtX3ZhbGlkYXRpb25fY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e2BpbnB1dF8ke21heElEfWB9IGNsYXNzTmFtZT1cImdmLWxhYmVsIFwiPlxuICAgICAgICAgICAge2hvbmV5cG90TGFiZWx9XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG5hbWU9e2BpbnB1dF8ke21heElEfWB9XG4gICAgICAgICAgICBpZD17YGlucHV0XyR7bWF4SUR9YH1cbiAgICAgICAgICAgIHZhbHVlPXtob25leXBvdFZhbHVlfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0SG9uZXlwb3RWYWx1ZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iXX0=